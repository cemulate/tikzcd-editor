!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var n,r,o,i,l,a,u,c,s={},f=[],p=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function d(t,e){for(var n in e)t[n]=e[n];return t}function h(t){var e=t.parentNode;e&&e.removeChild(t)}function y(t,e,n){var r,o,i,l=arguments,a={};for(i in e)"key"==i?r=e[i]:"ref"==i?o=e[i]:a[i]=e[i];if(arguments.length>3)for(n=[n],i=3;i<arguments.length;i++)n.push(l[i]);if(null!=n&&(a.children=n),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===a[i]&&(a[i]=t.defaultProps[i]);return b(t,a,r,o,null)}function b(t,e,r,o,i){var l={type:t,props:e,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i};return null==i&&(l.__v=l),null!=n.vnode&&n.vnode(l),l}function m(t){return t.children}function v(t,e){this.props=t,this.context=e}function g(t,e){if(null==e)return t.__?g(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?g(t):null}function w(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return w(t)}}function _(t){(!t.__d&&(t.__d=!0)&&o.push(t)&&!O.__r++||l!==n.debounceRendering)&&((l=n.debounceRendering)||i)(O)}function O(){for(var t;O.__r=o.length;)t=o.sort((function(t,e){return t.__v.__b-e.__v.__b})),o=[],t.some((function(t){var e,n,r,o,i,l,a;t.__d&&(l=(i=(e=t).__v).__e,(a=e.__P)&&(n=[],(r=d({},i)).__v=r,o=x(a,i,r,e.__n,void 0!==a.ownerSVGElement,null,n,null==l?g(i):l),E(n,i),o!=l&&w(i)))}))}function j(t,e,n,r,o,i,l,a,u,c){var p,d,y,v,w,_,O,j=r&&r.__k||f,S=j.length;for(u==s&&(u=null!=l?l[0]:S?g(r,0):null),n.__k=[],p=0;p<e.length;p++)if(null!=(v=n.__k[p]=null==(v=e[p])||"boolean"==typeof v?null:"string"==typeof v||"number"==typeof v?b(null,v,null,null,v):Array.isArray(v)?b(m,{children:v},null,null,null):null!=v.__e||null!=v.__c?b(v.type,v.props,v.key,null,v.__v):v)){if(v.__=n,v.__b=n.__b+1,null===(y=j[p])||y&&v.key==y.key&&v.type===y.type)j[p]=void 0;else for(d=0;d<S;d++){if((y=j[d])&&v.key==y.key&&v.type===y.type){j[d]=void 0;break}y=null}w=x(t,v,y=y||s,o,i,l,a,u,c),(d=v.ref)&&y.ref!=d&&(O||(O=[]),y.ref&&O.push(y.ref,null,v),O.push(d,v.__c||w,v)),null!=w?(null==_&&(_=w),u=k(t,v,y,j,l,w,u),c||"option"!=n.type?"function"==typeof n.type&&(n.__d=u):t.value=""):u&&y.__e==u&&u.parentNode!=t&&(u=g(y))}if(n.__e=_,null!=l&&"function"!=typeof n.type)for(p=l.length;p--;)null!=l[p]&&h(l[p]);for(p=S;p--;)null!=j[p]&&M(j[p],j[p]);if(O)for(p=0;p<O.length;p++)R(O[p],O[++p],O[++p])}function k(t,e,n,r,o,i,l){var a,u,c;if(void 0!==e.__d)a=e.__d,e.__d=void 0;else if(o==n||i!=l||null==i.parentNode)t:if(null==l||l.parentNode!==t)t.appendChild(i),a=null;else{for(u=l,c=0;(u=u.nextSibling)&&c<r.length;c+=2)if(u==i)break t;t.insertBefore(i,l),a=l}return void 0!==a?a:i.nextSibling}function S(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||p.test(e)?n:n+"px"}function C(t,e,n,r,o){var i,l;if(o&&"className"==e&&(e="class"),"style"===e)if("string"==typeof n)t.style=n;else{if("string"==typeof r&&(t.style=r=""),r)for(e in r)n&&e in n||S(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||S(t.style,e,n[e])}else"o"===e[0]&&"n"===e[1]?(i=e!==(e=e.replace(/Capture$/,"")),(l=e.toLowerCase())in t&&(e=l),e=e.slice(2),t.l||(t.l={}),t.l[e]=n,n?r||t.addEventListener(e,P,i):t.removeEventListener(e,P,i)):"list"!==e&&"tagName"!==e&&"form"!==e&&"type"!==e&&"size"!==e&&"download"!==e&&"href"!==e&&!o&&e in t?t[e]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/xlink:?/,""))?null==n||!1===n?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,n))}function P(t){this.l[t.type](n.event?n.event(t):t)}function A(t,e,n){var r,o;for(r=0;r<t.__k.length;r++)(o=t.__k[r])&&(o.__=t,o.__e&&("function"==typeof o.type&&o.__k.length>1&&A(o,e,n),e=k(n,o,o,t.__k,null,o.__e,e),"function"==typeof t.type&&(t.__d=e)))}function x(t,e,r,o,i,l,a,u,c){var s,f,p,h,y,b,g,w,_,O,k,S=e.type;if(void 0!==e.constructor)return null;(s=n.__b)&&s(e);try{t:if("function"==typeof S){if(w=e.props,_=(s=S.contextType)&&o[s.__c],O=s?_?_.props.value:s.__:o,r.__c?g=(f=e.__c=r.__c).__=f.__E:("prototype"in S&&S.prototype.render?e.__c=f=new S(w,O):(e.__c=f=new v(w,O),f.constructor=S,f.render=T),_&&_.sub(f),f.props=w,f.state||(f.state={}),f.context=O,f.__n=o,p=f.__d=!0,f.__h=[]),null==f.__s&&(f.__s=f.state),null!=S.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=d({},f.__s)),d(f.__s,S.getDerivedStateFromProps(w,f.__s))),h=f.props,y=f.state,p)null==S.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(null==S.getDerivedStateFromProps&&w!==h&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(w,O),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(w,f.__s,O)||e.__v===r.__v){f.props=w,f.state=f.__s,e.__v!==r.__v&&(f.__d=!1),f.__v=e,e.__e=r.__e,e.__k=r.__k,f.__h.length&&a.push(f),A(e,u,t);break t}null!=f.componentWillUpdate&&f.componentWillUpdate(w,f.__s,O),null!=f.componentDidUpdate&&f.__h.push((function(){f.componentDidUpdate(h,y,b)}))}f.context=O,f.props=w,f.state=f.__s,(s=n.__r)&&s(e),f.__d=!1,f.__v=e,f.__P=t,s=f.render(f.props,f.state,f.context),f.state=f.__s,null!=f.getChildContext&&(o=d(d({},o),f.getChildContext())),p||null==f.getSnapshotBeforeUpdate||(b=f.getSnapshotBeforeUpdate(h,y)),k=null!=s&&s.type==m&&null==s.key?s.props.children:s,j(t,Array.isArray(k)?k:[k],e,r,o,i,l,a,u,c),f.base=e.__e,f.__h.length&&a.push(f),g&&(f.__E=f.__=null),f.__e=!1}else null==l&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=D(r.__e,e,r,o,i,l,a,c);(s=n.diffed)&&s(e)}catch(t){e.__v=null,n.__e(t,e,r)}return e.__e}function E(t,e){n.__c&&n.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){n.__e(t,e.__v)}}))}function D(t,e,n,r,o,i,l,a){var u,c,p,d,h,y=n.props,b=e.props;if(o="svg"===e.type||o,null!=i)for(u=0;u<i.length;u++)if(null!=(c=i[u])&&((null===e.type?3===c.nodeType:c.localName===e.type)||t==c)){t=c,i[u]=null;break}if(null==t){if(null===e.type)return document.createTextNode(b);t=o?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,b.is&&{is:b.is}),i=null,a=!1}if(null===e.type)y!==b&&t.data!==b&&(t.data=b);else{if(null!=i&&(i=f.slice.call(t.childNodes)),p=(y=n.props||s).dangerouslySetInnerHTML,d=b.dangerouslySetInnerHTML,!a){if(null!=i)for(y={},h=0;h<t.attributes.length;h++)y[t.attributes[h].name]=t.attributes[h].value;(d||p)&&(d&&p&&d.__html==p.__html||(t.innerHTML=d&&d.__html||""))}(function(t,e,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in e||C(t,i,null,n[i],r);for(i in e)o&&"function"!=typeof e[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===e[i]||C(t,i,e[i],n[i],r)})(t,b,y,o,a),d?e.__k=[]:(u=e.props.children,j(t,Array.isArray(u)?u:[u],e,n,r,"foreignObject"!==e.type&&o,i,l,s,a)),a||("value"in b&&void 0!==(u=b.value)&&u!==t.value&&C(t,"value",u,y.value,!1),"checked"in b&&void 0!==(u=b.checked)&&u!==t.checked&&C(t,"checked",u,y.checked,!1))}return t}function R(t,e,r){try{"function"==typeof t?t(e):t.current=e}catch(t){n.__e(t,r)}}function M(t,e,r){var o,i,l;if(n.unmount&&n.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||R(o,null,e)),r||"function"==typeof t.type||(r=null!=(i=t.__e)),t.__e=t.__d=void 0,null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){n.__e(t,e)}o.base=o.__P=null}if(o=t.__k)for(l=0;l<o.length;l++)o[l]&&M(o[l],e,r);null!=i&&h(i)}function T(t,e,n){return this.constructor(t,n)}function I(t,e,r){var o,i,l;n.__&&n.__(t,e),i=(o=r===a)?null:r&&r.__k||e.__k,t=y(m,null,[t]),l=[],x(e,(o?e:r||e).__k=t,i||s,s,void 0!==e.ownerSVGElement,r&&!o?[r]:i?null:e.childNodes.length?f.slice.call(e.childNodes):null,l,r||s,o),E(l,t)}n={__e:function(t,e){for(var n,r;e=e.__;)if((n=e.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(r=!0,n.setState(n.constructor.getDerivedStateFromError(t))),null!=n.componentDidCatch&&(r=!0,n.componentDidCatch(t)),r)return _(n.__E=n)}catch(e){t=e}throw t}},r=function(t){return null!=t&&void 0===t.constructor},v.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=d({},this.state),"function"==typeof t&&(t=t(d({},n),this.props)),t&&d(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),_(this))},v.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),_(this))},v.prototype.render=m,o=[],i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,O.__r=0,a=s,u=0,c={render:I,hydrate:function(t,e){I(t,e,a)},createElement:y,h:y,Fragment:m,createRef:function(){return{current:null}},isValidElement:r,Component:v,cloneElement:function(t,e,n){var r,o,i,l=arguments,a=d({},t.props);for(i in e)"key"==i?r=e[i]:"ref"==i?o=e[i]:a[i]=e[i];if(arguments.length>3)for(n=[n],i=3;i<arguments.length;i++)n.push(l[i]);return null!=n&&(a.children=n),b(t.type,a,r||t.key,o||t.ref,null)},createContext:function(t,e){var n={__c:e="__cC"+u++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t,n,r){return this.getChildContext||(n=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(_)},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n},toChildArray:function t(e,n){return n=n||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){t(e,n)})):n.push(e)),n},__u:M,options:n},e(t)<"u"?t.exports=c:self.preact=c}()}).call(this,n(6)(t))},function(t,e){function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,l=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw l}}}}function o(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.regexRule=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.lineBreaks,o=void 0!==r&&r,i=n.stateCondition,l=void 0===i?function(t){return!0}:i,a=n.value,u=void 0===a?function(t,e){return t[0]}:a,c=n.last,s=void 0===c?function(t,e){return!1}:c,f=n.condition,p=void 0===f?function(t,e){return!0}:f,d=n.nextState,h=void 0===d?function(t,e){return e}:d;if(!e.sticky&&!e.global)throw new TypeError("Either sticky (/y, recommended) or global (/g) has to be enabled for the regular expresion.");return{type:t,lineBreaks:o,match:function(t,n,r){if(!l(r))return null;e.lastIndex=n;var o=e.exec(t);return null!=o&&o.index===n&&p(o,r)?{length:o[0].length,value:u(o,r),last:s(o,r),state:h(o,r)}:null}}},e.tokenizerRule=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.lineBreaks,i=void 0!==r&&r,l=n.stateCondition,a=void 0===l?function(t){return!0}:l,u=n.value,c=void 0===u?function(t,e){return t}:u,s=n.last,f=void 0===s?function(t,e){return!1}:s,p=n.condition,d=void 0===p?function(t,e){return!0}:p,h=n.nextState,y=void 0===h?function(t,e){return e}:h;return{type:t,lineBreaks:i,match:function(t,n,r){if(!a(r))return null;var i=e(t);i.col=this.col,i.row=this.row,i.pos=n;var l=o(i);return d(l,r)?{length:i.pos-n,value:c(l,r),last:f(l,r),state:y(l,r)}:null}}},e.createTokenizer=function(t){var e=t.rules,o=t.strategy,i=void 0===o?"first":o,l=t.state,a=void 0===l?{}:l;if(!["first","longest"].includes(i))throw new TypeError("Only 'first' and 'longest' are allowed as values for the strategy option.");return function(t){var o;return n(o={state:a,row:0,col:0,pos:0,done:!1},Symbol.iterator,(function(){return this})),n(o,"next",(function(){for(;!this.done&&this.pos<t.length;){var n,o=void 0,l=void 0,a=void 0,u=!1,c=r(e);try{for(c.s();!(n=c.n()).done;){var s=n.value;if(null!=(a=s.match.call(this,t,this.pos,this.state))){var f=a.value;if(void 0===f&&(f=l=t.substr(this.pos,a.length)),(null==o||o.length<a.length)&&(o={type:s.type,value:f,row:this.row,col:this.col,pos:this.pos,length:a.length},u=!!s.lineBreaks),"first"===i)break}}}catch(t){c.e(t)}finally{c.f()}null==o&&(o={type:null,value:t[this.pos],row:this.row,col:this.col,pos:this.pos,length:1},u=!0);var p=0,d=-1;if(u&&(null==l&&(l=t.substr(this.pos,o.length)),p=Array.from(l).filter((function(t,e){return"\n"===t&&(d=e,!0)})).length,this.row+=p),p>0?this.col=o.length-d-1:this.col+=o.length,this.pos+=o.length,null!=a&&null!=a.state&&(this.state=a.state,this.done=!!a.last),null==o.type||"_"!==o.type[0])return{value:o,done:!1}}return this.done=!0,{done:!0}})),o}}},function(t,e,n){var r;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var i={}.hasOwnProperty;function l(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var r=o(n);if("string"===r||"number"===r)t.push(n);else if(Array.isArray(n)&&n.length){var a=l.apply(null,n);a&&t.push(a)}else if("object"===r)for(var u in n)i.call(n,u)&&n[u]&&t.push(u)}}return t.join(" ")}t.exports?(l.default=l,t.exports=l):"object"===o(n(5))&&n(5)?void 0===(r=function(){return l}.apply(e,[]))||(t.exports=r):window.classNames=l}()},function(t,e,n){"use strict";var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.target,r=void 0===n?document.body:n,o=document.createElement("textarea"),i=document.activeElement;o.value=t,o.setAttribute("readonly",""),o.style.contain="strict",o.style.position="absolute",o.style.left="-9999px",o.style.fontSize="12pt";var l=document.getSelection(),a=!1;l.rangeCount>0&&(a=l.getRangeAt(0)),r.append(o),o.select(),o.selectionStart=0,o.selectionEnd=t.length;var u=!1;try{u=document.execCommand("copy")}catch(t){}return o.remove(),a&&(l.removeAllRanges(),l.addRange(a)),i&&i.focus(),u};t.exports=r,t.exports.default=r},function(t,e,n){var r,o=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(t,e){if(!r[t]){r[t]={};for(var n=0;n<t.length;n++)r[t][t.charAt(n)]=n}return r[t][e]}var i={compressToBase64:function(t){if(null==t)return"";var n=i._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:i._decompress(t.length,32,(function(n){return o(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":i._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:i._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=i.compress(t),n=new Uint8Array(2*e.length),r=0,o=e.length;r<o;r++){var l=e.charCodeAt(r);n[2*r]=l>>>8,n[2*r+1]=l%256}return n},decompressFromUint8Array:function(e){if(null==e)return i.decompress(e);for(var n=new Array(e.length/2),r=0,o=n.length;r<o;r++)n[r]=256*e[2*r]+e[2*r+1];var l=[];return n.forEach((function(e){l.push(t(e))})),i.decompress(l.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":i._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),i._decompress(t.length,32,(function(e){return o(n,t.charAt(e))})))},compress:function(e){return i._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var r,o,i,l={},a={},u="",c="",s="",f=2,p=3,d=2,h=[],y=0,b=0;for(i=0;i<t.length;i+=1)if(u=t.charAt(i),Object.prototype.hasOwnProperty.call(l,u)||(l[u]=p++,a[u]=!0),c=s+u,Object.prototype.hasOwnProperty.call(l,c))s=c;else{if(Object.prototype.hasOwnProperty.call(a,s)){if(s.charCodeAt(0)<256){for(r=0;r<d;r++)y<<=1,b==e-1?(b=0,h.push(n(y)),y=0):b++;for(o=s.charCodeAt(0),r=0;r<8;r++)y=y<<1|1&o,b==e-1?(b=0,h.push(n(y)),y=0):b++,o>>=1}else{for(o=1,r=0;r<d;r++)y=y<<1|o,b==e-1?(b=0,h.push(n(y)),y=0):b++,o=0;for(o=s.charCodeAt(0),r=0;r<16;r++)y=y<<1|1&o,b==e-1?(b=0,h.push(n(y)),y=0):b++,o>>=1}0==--f&&(f=Math.pow(2,d),d++),delete a[s]}else for(o=l[s],r=0;r<d;r++)y=y<<1|1&o,b==e-1?(b=0,h.push(n(y)),y=0):b++,o>>=1;0==--f&&(f=Math.pow(2,d),d++),l[c]=p++,s=String(u)}if(""!==s){if(Object.prototype.hasOwnProperty.call(a,s)){if(s.charCodeAt(0)<256){for(r=0;r<d;r++)y<<=1,b==e-1?(b=0,h.push(n(y)),y=0):b++;for(o=s.charCodeAt(0),r=0;r<8;r++)y=y<<1|1&o,b==e-1?(b=0,h.push(n(y)),y=0):b++,o>>=1}else{for(o=1,r=0;r<d;r++)y=y<<1|o,b==e-1?(b=0,h.push(n(y)),y=0):b++,o=0;for(o=s.charCodeAt(0),r=0;r<16;r++)y=y<<1|1&o,b==e-1?(b=0,h.push(n(y)),y=0):b++,o>>=1}0==--f&&(f=Math.pow(2,d),d++),delete a[s]}else for(o=l[s],r=0;r<d;r++)y=y<<1|1&o,b==e-1?(b=0,h.push(n(y)),y=0):b++,o>>=1;0==--f&&(f=Math.pow(2,d),d++)}for(o=2,r=0;r<d;r++)y=y<<1|1&o,b==e-1?(b=0,h.push(n(y)),y=0):b++,o>>=1;for(;;){if(y<<=1,b==e-1){h.push(n(y));break}b++}return h.join("")},decompress:function(t){return null==t?"":""==t?null:i._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,r){var o,i,l,a,u,c,s,f=[],p=4,d=4,h=3,y="",b=[],m={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)f[o]=o;for(l=0,u=Math.pow(2,2),c=1;c!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),l|=(a>0?1:0)*c,c<<=1;switch(l){case 0:for(l=0,u=Math.pow(2,8),c=1;c!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),l|=(a>0?1:0)*c,c<<=1;s=t(l);break;case 1:for(l=0,u=Math.pow(2,16),c=1;c!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),l|=(a>0?1:0)*c,c<<=1;s=t(l);break;case 2:return""}for(f[3]=s,i=s,b.push(s);;){if(m.index>e)return"";for(l=0,u=Math.pow(2,h),c=1;c!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),l|=(a>0?1:0)*c,c<<=1;switch(s=l){case 0:for(l=0,u=Math.pow(2,8),c=1;c!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),l|=(a>0?1:0)*c,c<<=1;f[d++]=t(l),s=d-1,p--;break;case 1:for(l=0,u=Math.pow(2,16),c=1;c!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),l|=(a>0?1:0)*c,c<<=1;f[d++]=t(l),s=d-1,p--;break;case 2:return b.join("")}if(0==p&&(p=Math.pow(2,h),h++),f[s])y=f[s];else{if(s!==d)return null;y=i+i.charAt(0)}b.push(y),f[d++]=i+y.charAt(0),i=y,0==--p&&(p=Math.pow(2,h),h++)}}};return i}();void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n(3),i=n.n(o);function l(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){for(var n=function t(e){return e.reduce((function(e,n){return n instanceof Array?e.push.apply(e,l(t(n))):e.push(n),e}),[])},r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return{type:t,props:e||{},key:e&&e.key,children:n(o)}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b(t);if(e){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),t}function w(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||O(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var l,a=t[Symbol.iterator]();!(r=(l=a.next()).done)&&(n.push(l.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||O(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){if(t){if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(t,e):void 0}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var k=['"',",","]"];var S=function(){},C=function(){},P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(n,t);var e=h(n);function n(t){var r;m(this,n);var o=function t(e){return e.children.reduce((function(e,n){return null==n||([S,C].includes(n.type)?e.push(n):e.push.apply(e,w(t(n)))),e}),[])}((r=e.call(this,t)).props);return r.nodes=o.reduce((function(t,e){return e.type===S&&e.key&&e.props.position?(e.key in t?t[e.key]=f(f({},t[e.key]),{},{props:f(f({},t[e.key].props),e.props)}):t[e.key]=e,t):t}),{}),r.edges=o.reduce((function(e,n){if(n.type!==C||!n.props.from||!n.props.to)return e;var o,i,l,a,u,c,s,p,d,h,y=_(t.co?["to","from"]:["from","to"],2),b=y[0],m=y[1];return n.props[b]in e||(e[n.props[b]]=[]),e[n.props[b]].push(f(f({},n),{},{props:f(f({},n.props),{},{direction:(o=r.nodes[n.props[b]].props.position,i=r.nodes[n.props[m]].props.position,l=_(o,2),a=l[0],u=l[1],c=_(i,2),s=c[0]-a,p=c[1]-u,d=[s,p].map(Math.sign),h=[["l","","r"],["u","","d"]],[s,p].map((function(t,e){return h[e][d[e]+1].repeat(Math.abs(t))})).join(""))})})),e}),{}),r}return g(n,[{key:"getBounds",value:function(){var t=this;return Object.keys(this.nodes).map((function(e){return t.nodes[e].props.position})).reduce((function(t,e){var n=_(t,4),r=n[0],o=n[1],i=n[2],l=n[3],a=_(e,2),u=a[0],c=a[1];return[Math.min(r,u),Math.max(o,u),Math.min(i,c),Math.max(l,c)]}),[1/0,-1/0,1/0,-1/0])}},{key:"toArray",value:function(){var t=_(this.getBounds(),4),e=t[0],n=t[1],r=t[2],o=t[3];if(e>n||r>o)return[];for(var i=Array(o-r+1).fill().map((function(t){return Array(n-e+1).fill(null)})),l=0,a=Object.keys(this.nodes);l<a.length;l++){var u=a[l],c=_(this.nodes[u].props.position,2),s=c[0];i[c[1]-r][s-e]={node:this.nodes[u],edges:this.edges[u]||[]}}return i}},{key:"render",value:function(){var t,e=this,n=null==this.props.options?"":"[".concat(this.props.options,"]"),r=this.toArray().map((function(t){return t.map((function(t){return null==t?"":[(n=t.node.props.value||"",r=_(""===n.trim()||k.some((function(t){return n.includes(t)}))?["{","}"]:["",""],2),o=r[0],i=r[1],"".concat(o).concat(n).concat(i))].concat(w(t.edges.map((function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.props,r=n.direction,o=n.alt,i=n.value;if(null==r)return"";var l=t.props.labelPosition||"left";e===!o&&"inside"!==l&&(l="left"===l?"right":"left");var a={left:"",right:"'",inside:" description"}[l],u=null!=i&&k.some((function(t){return i.includes(t)}))?["{","}"]:["",""],c=_(u,2),s=c[0],f=c[1],p=null!=i?'"'.concat(s).concat(i).concat(f,'"').concat(a):null,d=[r?"":null,p].concat(w(t.props.args||[])).filter((function(t){return null!=t})).join(", ");return"\\arrow[".concat(r).concat(d,"]")}(t,e.props.co)})))).join(" ");var n,r,o,i}))}));if((t=[]).concat.apply(t,w(r)).every((function(t){return""===t}))&&(r=r.map((function(t){return t.map((function(t){return"{}"}))}))),this.props.align&&r.length>0)for(var o=function(t){for(var e=Math.max.apply(Math,w(r.map((function(e){return e[t].length})))),n=0;n<r.length;n++)r[n][t]=r[n][t].padEnd(e," ")},i=0;i<r[0].length;i++)o(i);return["\\begin{tikzcd}".concat(n),r.map((function(t){return t.join(" & ")})).join(" \\\\\n"),"\\end{tikzcd}"].join("\n")}}]),n}(function(){function t(e){m(this,t),this.props=e}return g(t,[{key:"render",value:function(){}}]),t}());function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D(t){if(null==t)return null;if(![P,S,C].includes(t.type)){var e=x(x({},t.props),{},{children:t.children});return"render"in t.type.prototype?D(new t.type(e).render()):D(t.type(e))}return x(x({},t),{},{children:t.children.map((function(t){return D(t)}))})}function R(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=D(t);return null==r||r.type!==P?null:new P(x(x({},r.props),{},{co:n!==!!r.props.co,align:!!e.align&&e.align,children:r.children}))}function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return R(t,e,n).render()}var T=n(4),I=0;function B(){return(I++).toString()}function L(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))}function U(t,e){return t.map((function(t,n){return t+e[n]}))}function z(t,e){return e.map((function(e){return t*e}))}function F(t,e){return t.map((function(t,n){return t-e[n]}))}var H=n(1);function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){K(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function K(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W(t){return function(t){if(Array.isArray(t))return J(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||X(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var l,a=t[Symbol.iterator]();!(r=(l=a.next()).done)&&(n.push(l.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||X(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=X(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){a=!0,i=t},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}function X(t,e){if(t){if("string"==typeof t)return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(t,e):void 0}}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Q(t){var e="function"==typeof Map?new Map:void 0;return(Q=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return tt(t,arguments,rt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),nt(r,t)})(t)}function tt(t,e,n){return(tt=et()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&nt(o,n.prototype),o}).apply(null,arguments)}function et(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function nt(t,e){return(nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nt(t,e)}(o,t);var e,n,r=(e=o,n=et(),function(){var t,r=rt(e);if(n){var o=rt(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Z(this,t)});function o(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return q(this,o),(e=r.call(this)).name="ParseError",e.token=n,e.message=null==n?t:"".concat(t," at line ").concat(n.row+1,", column ").concat(n.col+1),e}return o}(Q(Error));var it=Object(H.createTokenizer)({rules:[Object(H.regexRule)("_whitespace",new RegExp("\\s+","y"),{lineBreaks:!0}),Object(H.regexRule)("comma",new RegExp(",","y")),Object(H.regexRule)("command",new RegExp("\\\\arrow\\s*\\[","y"),{lineBreaks:!0}),Object(H.regexRule)("end",new RegExp("\\]","y")),Object(H.regexRule)("alt",new RegExp("'","y")),Object(H.regexRule)("direction",new RegExp("[lrud]+(?!\\w)","y")),Object(H.regexRule)("argName",new RegExp("([a-zA-Z]+ )*[a-zA-Z]+","y")),Object(H.regexRule)("argValue",new RegExp("=(-?\\d+(.\\d+)?(em)?)","y"),{value:function(t){return t[1]}}),{type:"label",lineBreaks:!0,match:function(t,e){var n=function(t){if('"'!==t[0])return null;for(var e=1,n=0,r="{"===t[1];e<t.length;){var o=t[e];if('"'===o&&n<=0)break;"\\"===o&&e++,"{"===o&&n++,"}"===o&&0===--n&&'"'!==t[e+1]&&(r=!1),e++}return'"'!==t[e]?null:{match:t.slice(0,e+1),value:r?t.slice(2,e-1):t.slice(1,e),wrapped:r}}(t.slice(e));return null==n?null:{length:n.match.length,value:n.value}}}]}),lt=Object(H.createTokenizer)({rules:[Object(H.regexRule)("_whitespace",new RegExp("\\s+","y"),{lineBreaks:!0}),Object(H.regexRule)("_comment",new RegExp("%.*","y")),Object(H.regexRule)("begin",new RegExp("\\\\begin\\s*{tikzcd}","y"),{lineBreaks:!0}),Object(H.regexRule)("end",new RegExp("\\\\end\\s*{tikzcd}","y"),{lineBreaks:!0}),{type:"node",lineBreaks:!0,match:function(t,e){var n=function(t){for(var e=0;e<t.length;){var n=t[e];if(["&","%"].includes(n)||[/^\\\\/,/^\\arrow\s*\[/,/^\\end\s*{tikzcd}/].some((function(n){return null!=n.exec(t.slice(e))})))break;"\\"===n&&e++,e++}var r=t.slice(0,e).trim();"\\"===r[r.length-1]&&(r+=t[r.length]);var o="{"===r[0]&&"}"===r[r.length-1];return{match:r,value:o?r.slice(1,-1):r,wrapped:o}}(t.slice(e)),r=n.match,o=n.value;return 0===r.length?null:{length:r.length,value:o}}},{type:"arrow",lineBreaks:!0,match:function(t,e){if(!t.slice(e).startsWith("\\arrow"))return null;var n,r=[],o=Y(it(t.slice(e)));try{for(o.s();!(n=o.n()).done;){var i=n.value;if(0===r.length&&"command"!==i.type)return null;if(r.push(i),"end"===i.type)break}}catch(t){o.e(t)}finally{o.f()}var l=r[r.length-1];return{length:l.pos+l.length,value:r}}},Object(H.regexRule)("align",new RegExp("&","y")),Object(H.regexRule)("newrow",new RegExp("\\\\\\\\","y"))]});function at(t){var e,n={direction:[0,0],value:null,labelPosition:"left"},r=[],o={},i=Y(t);try{for(i.s();!(e=i.n()).done;){var l=e.value;if(null==l.type)throw new ot("Unexpected token",l);if("direction"===l.type){var a=W(l.value);n.direction=a.reduce((function(t,e){return U(t,{l:[-1,0],r:[1,0],u:[0,-1],d:[0,1]}[e])}),[0,0])}else if("label"===l.type){n.value=l.value;var u=t.next(),c=u.done,s=u.value;c||("alt"===s.type?n.labelPosition="right":"argName"===s.type&&"description"===s.value&&(n.labelPosition="inside"))}else"argName"===l.type?(o.name=l.value,r.push(o)):"argValue"===l.type?o.value=l.value:"alt"===l.type?o.alt=!0:"comma"===l.type&&(o={})}}catch(t){i.e(t)}finally{i.f()}for(var f=0,p=r;f<p.length;f++){var d=p[f],h=d.name,y=d.value,b=d.alt;Object.assign(n,{"near start":{labelPositionLongitudinal:"nearstart"},"very near start":{labelPositionLongitudinal:"verynearstart"},"near end":{labelPositionLongitudinal:"nearend"},"very near end":{labelPositionLongitudinal:"verynearend"},harpoon:{head:"harpoon".concat(b?"alt":"")},"two heads":{head:"twoheads"},"no head":{head:"none"},Rightarrow:{line:"double"},dashed:{line:"dashed"},dotted:{line:"dotted"},phantom:{labelPosition:"inside",tail:"none",line:"none",head:"none"},hook:{tail:"hook".concat(b?"alt":"")},"maps to":{tail:"mapsto"},"bend left":{bend:null!=y?+y:30},"bend right":{bend:null!=y?-y:-30},"shift left":{shift:null!=y?-y:-1},"shift right":{shift:null!=y?y:1},loop:function(){var t=[0,!1],e=G(["in","out"].map((function(t){var e=r.find((function(e){return e.name===t}));return null==e?null:+e.value})),2),n=e[0],o=e[1];if(null!=n&&null!=o){var i=((n+o)/2+90)%360;t=(o-n+360)%360<180?[i,!0]:[i,!1]}return{loop:t}}()}[h])}return n}function ut(t){return function(t){var e,n=!1,r={nodes:[],edges:[]},o=0,i=0,l=Y(t);try{for(l.s();!(e=l.n()).done;){if("begin"===e.value.type){n=!0;break}}}catch(t){l.e(t)}finally{l.f()}var a,u=Y(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;if(null==c.type)throw new ot("Unexpected token",c);if("end"===c.type)break;if("align"===c.type?o++:"newrow"===c.type&&(o=0,i++),"node"===c.type)r.nodes.push({position:[o,i],value:c.value});else if("arrow"===c.type){var s,f=c.value,p=Y(f);try{for(p.s();!(s=p.n()).done;){var d=s.value,h=G(U([d.row,d.col,d.pos],[c.row,c.col,c.pos]),3);d.row=h[0],d.col=h[1],d.pos=h[2]}}catch(t){p.e(t)}finally{p.f()}if("end"!==f.slice(-1)[0].type)throw new ot("Arrow does not end",c);var y=at(f[Symbol.iterator]());if(y.loop||!L(y.direction,[0,0])){var b=[o,i],m=$({from:b,to:U(b,y.direction)},y);delete m.direction,r.edges.push(m)}}}}catch(t){u.e(t)}finally{u.f()}var v,g=function(t){var e=r.nodes.findIndex((function(e){return L(e.position,t)}));return e<0&&(e=r.nodes.length,r.nodes.push({position:t,value:""})),e},w=Y(r.edges);try{for(w.s();!(v=w.n()).done;){var _=v.value;_.from=g(_.from),_.to=g(_.to),_.loop&&(_.to=_.from)}}catch(t){w.e(t)}finally{w.f()}if(!n)throw new ot("Did not find tikzcd environment");return r}(lt(t))}function ct(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var l,a=t[Symbol.iterator]();!(r=(l=a.next()).done)&&(n.push(l.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||ft(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(t){return function(t){if(Array.isArray(t))return pt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||ft(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(t,e){if(t){if("string"==typeof t)return pt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pt(t,e):void 0}}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach((function(e){yt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function yt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bt(t){var e=[0,1].map((function(e){return t.nodes.reduce((function(t,n){return Math.min(t,n.position[e])}),1/0)}));return JSON.stringify({nodes:t.nodes.map((function(t){return ht(ht({},t),{},{id:void 0,position:F(t.position,e)})})),edges:t.edges.map((function(e){return ht(ht({},e),{},{from:t.nodes.findIndex((function(t){return t.id===e.from})),to:t.nodes.findIndex((function(t){return t.id===e.to}))})}))})}function mt(t){var e=JSON.parse(t),n=e.nodes.map((function(t){return ht(ht({},t),{},{id:B()})}));return{nodes:n,edges:e.edges.map((function(t){return ht(ht({},t),{},{from:n[t.from].id,to:n[t.to].id})}))}}function vt(t){return mt((e=t,decodeURIComponent(Array.prototype.map.call(atob(e),(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))));var e}function gt(t){return M(u(P,null,t.nodes.map((function(t,e){return u(S,{key:t.id,position:t.position,value:t.value})})),t.edges.map((function(t){return[u(C,{from:t.from,to:t.to,value:t.value,labelPosition:"none"===t.line?null:t.labelPosition,args:[].concat(st([t.head,t.line,t.tail,t.labelPositionLongitudinal].map((function(e,n){return{double:"Rightarrow",solid:null,dashed:"dashed",dotted:"dotted",none:["none"===t.line?null:"no head","phantom",null][n],default:null,harpoon:"harpoon",harpoonalt:"harpoon'",hook:"hook",hookalt:"hook'",mapsto:"maps to",tail:"tail",twoheads:"two heads",center:null,nearstart:"near start",nearend:"near end",verynearstart:"very near start",verynearend:"very near end"}[e]}))),[t.bend>0?"bend left=".concat(t.bend).replace(/=30$/,""):t.bend<0?"bend right=".concat(-t.bend).replace(/=30$/,""):null,t.shift<0?"shift left=".concat(-t.shift).replace(/=1$/,""):t.shift>0?"shift right=".concat(t.shift).replace(/=1$/,""):null],st(null!=t.loop?function(){var e=ct(t.loop||[0,!1],2),n=e[0],r=e[1],o=ct([235,305].map((function(t){return(t+n+360)%360})),2),i=o[0],l=o[1];if(!r){var a=[l,i];i=a[0],l=a[1]}return["loop","distance=2em","in=".concat(i),"out=".concat(l)]}():[])).filter((function(t){return null!=t}))})]}))),{align:!0})}var wt=n(2),_t=n.n(wt);function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=At(t);if(e){var o=At(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pt(this,n)}}function Pt(t,e){return!e||"object"!==Ot(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function At(t){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(l,t);var e,n,o,i=Ct(l);function l(){var t;jt(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))).submit=function(){var e=t.props.onSubmit;(void 0===e?function(){}:e)({position:t.props.position})},t.handleGrabberMouseDown=function(e){var n=t.props.onGrabberMouseDown,r=void 0===n?function(){}:n;e.position=t.props.position,r(e)},t.handleGrabberDragStart=function(t){t.preventDefault()},t.handleEditSubmit=function(t){t.preventDefault()},t.handleEditKeyDown=function(e){"Enter"===e.key&&(e.stopPropagation(),t.submit())},t.handleInputBlur=function(e){t.submit()},t.stopPropagation=function(t){t.stopPropagation()},t.handleInputChange=function(e){var n=t.props.onChange;(void 0===n?function(){}:n)({position:t.props.position,value:e.currentTarget.value})},t.handleAddLoop=function(e){var n=t.props.onAddLoopClick;(void 0===n?function(){}:n)(e)},t}return e=l,(n=[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"shouldComponentUpdate",value:function(t){return t.value!==this.props.value||t.edit!==this.props.edit||t.selected!==this.props.selected}},{key:"componentDidUpdate",value:function(t){var e=this,n=this.props.onTypesetFinish,r=void 0===n?function(){}:n;this.props.value?(MathJax.typesetClear(this.valueElement),this.valueElement.innerHTML="\\(".concat(this.props.value,"\\)"),MathJax.typesetPromise([this.valueElement]).then((function(){r({position:e.props.position,element:e.valueElement.querySelector("mjx-container")})}))):r({position:this.props.position,element:null}),null!=this.inputElement&&t.edit!==this.props.edit&&this.inputElement.select()}},{key:"render",value:function(){var t=this;return Object(r.h)("li",{class:_t()("grid-cell",{edit:this.props.edit,selected:this.props.selected}),"data-position":this.props.position.join(",")},Object(r.h)("div",{class:"value",ref:function(e){return t.valueElement=e}},this.props.value?"\\(".concat(this.props.value,"\\)"):Object(r.h)("span",{class:"hide"},"_")),this.props.edit&&Object(r.h)("form",{class:"edit",onSubmit:this.handleEditSubmit},Object(r.h)("input",{ref:function(e){return t.inputElement=e},type:"text",value:this.props.value,onBlur:this.handleInputBlur,onInput:this.handleInputChange,onMouseDown:this.stopPropagation,onKeyDown:this.handleEditKeyDown})),Object(r.h)("img",{class:"grabber",src:"./img/grabber.svg",onMouseDown:this.handleGrabberMouseDown,onDragStart:this.handleGrabberDragStart}),Object(r.h)("img",{class:"loop",src:"./img/loop.svg",title:"Create Loop",alt:"Create Loop",onClick:this.handleAddLoop}))}}])&&kt(e.prototype,n),o&&kt(e,o),l}(r.Component);function Et(t){return function(t){if(Array.isArray(t))return Mt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Rt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var l,a=t[Symbol.iterator]();!(r=(l=a.next()).done)&&(n.push(l.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||Rt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(t,e){if(t){if("string"==typeof t)return Mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mt(t,e):void 0}}function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tt(t,e,n){var r=Dt(t,2);return{width:e,height:n,left:r[0]-e/2,top:r[1]-n/2}}function It(t,e,n){var r=t.left,o=t.top,i=t.width,l=t.height,a=Dt(e,2),u=a[0],c=a[1],s=Dt(n,2),f=[s[0]-u,s[1]-c],p=[r,o];return[u,c].map((function(t,e){return[p[e],p[e]+[i,l][e]].map((function(n){return(n-t)/f[e]}))})).reduce((function(t,e){return[].concat(Et(t),Et(e))}),[]).filter((function(t){return 0<=t&&t<=1})).map((function(t){return e.map((function(e,n){return e+t*f[n]}))})).filter((function(e){return function(t,e){var n=t.left,r=t.top,o=t.width,i=t.height,l=Dt(e,2),a=l[0],u=l[1];return n<=a&&a<=n+o&&r<=u&&u<=r+i}(t,e)}))}function Bt(t){return Math.sqrt(t.reduce((function(t,e){return t+e*e}),0))}function Lt(t){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var l,a=t[Symbol.iterator]();!(r=(l=a.next()).done)&&(n.push(l.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return zt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ht(t,e){return(Ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$t(t);if(e){var o=$t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vt(this,n)}}function Vt(t,e){return!e||"object"!==Lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ht(t,e)}(l,t);var e,n,o,i=Nt(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=i.call(this)).state={labelX:"50%",labelY:0,startPoint:t.from.map((function(e){return e*t.cellSize+t.cellSize/2})),endPoint:t.to.map((function(e){return e*t.cellSize+t.cellSize/2}))},e}return e=l,(n=[{key:"componentDidMount",value:function(){this.componentWillReceiveProps()}},{key:"shouldComponentUpdate",value:function(t,e){for(var n in t)if(t[n]!==this.props[n])return!0;for(var r in e)if(e[r]instanceof Array&&!L(e[r],this.state[r])||!(e[r]instanceof Array)&&e[r]!==this.state[r])return!0;return!1}},{key:"componentWillReceiveProps",value:function(t){if(null==t||t.from!==this.props.from||t.to!==this.props.to||t.fromSize!==this.props.fromSize||t.toSize!==this.props.toSize||t.bend!==this.props.bend||t.shift!==this.props.shift||t.loop!==this.props.loop){null==t&&(t=this.props);var e=t,n=e.cellSize,r=e.fromSize,o=e.toSize,i=Ut(r||[0,0],2),l=i[0],a=i[1],u=Ut(o||[0,0],2),c=u[0],s=u[1],f=Ut([c,s].map((function(t){return Math.min(n,t+20)})),2);c=f[0],s=f[1];var p=Ut([l,a].map((function(t){return Math.min(n,t+20)})),2);l=p[0],a=p[1];var d,h,y=Ut([t.from,t.to].map((function(t){return t.map((function(t){return t*n+n/2}))})),2),b=y[0],m=y[1],v=z(.5,U(b,m)),g=F(m,b),w=U(v,z(this.getLengthAngle().length*Math.tan(-(t.bend||0)*Math.PI/180)/2,(d=function(t){var e=Dt(t,2),n=e[0];return[-e[1],n]}(g),h=Bt(d),d.map((function(t){return t/h}))))),_=Tt(b,l,a),O=Tt(m,c,s),j=It(_,b,w)[0],k=It(O,w,m)[0];this.setState({startPoint:j||b,endPoint:k||m})}}},{key:"componentDidUpdate",value:function(t,e){var n=this;if(null!=this.valueElement){var r=this.props.onTypesetFinish,o=void 0===r?function(){}:r,i=Promise.resolve();this.props.value?(MathJax.typesetClear(this.valueElement),this.valueElement.innerHTML="\\(".concat(this.props.value,"\\)"),i=MathJax.typesetPromise([this.valueElement]).then((function(){o({id:n.props.id,element:n.valueElement.querySelector("mjx-container")})}))):o({id:this.props.id,element:null}),i.then((function(){if(n.props!==t||n.state.startPoint!==e.startPoint||n.state.endPoint!==e.endPoint){null==t&&(t=n.props);var r=n.pathElement.getBBox(),o=window.getComputedStyle(n.valueElement),i=o.width,l=o.height,a=Ut([i,l].map(parseFloat),2);i=a[0],l=a[1];var u=n.props.labelPosition||"left",c=Ut(n.props.loop||[0,!1],2),s=c[0];c[1]&&(u={left:"right",right:"left"}[u]||u);var f=n.getLengthAngle().angle+s*Math.PI/180,p=l*Math.abs(Math.cos(f))+i*Math.abs(Math.sin(f))-l,d=-i/2-(n.props.loop?0:6.5);n.setState({labelX:"calc(50% + ".concat(d,"px)"),labelY:{left:n.props.bend>=0?r.y-l-p/2-5:r.y+r.height-l-p/2-11,right:n.props.bend>0?r.y+p/2+11:r.y+r.height+p/2+5,inside:n.props.bend>0?r.y-l/2:r.y+r.height-l/2}[u]})}}))}}},{key:"getLengthAngle",value:function(){var t=this.state,e=t.startPoint,n=Ut(F(t.endPoint,e),2),r=n[0],o=n[1];return{length:Bt([r,o]),angle:Math.atan2(o,r)}}},{key:"render",value:function(){var t,e,n,o,i,l,a,u,c,s,f,p=this;if(this.props.loop){if(this.props.phantom)return;var d=Ut(this.state.startPoint,2);s=d[0],f=d[1];var h=Ut(this.props.loop||[0,!1],2),y=h[0],b=h[1],m=b?-1:1;t=e=109,c=360-y,i=0,u="\n        M ".concat(t/2-14," ").concat(e/2,"\n        a ").concat(24," ").concat(24*.8," 0 1 0 ").concat(28," 0\n      "),n=-t/2-16*Math.sin(c*Math.PI/180),o=16*Math.cos(c*Math.PI/180);var v=180*m/Math.PI,g=Math.PI*b*v,w=(Math.asin(14/24)-Math.PI)*v,_=14*m,O=[t/2-_,e/2],j=[t/2+_,e/2];l={x:t/2-_,y:e/2,transform:"\n          rotate(".concat(g-w," ").concat(O.join(" "),")\n          translate(").concat(-9.764," ").concat(-6.5,")\n        ")},a={x:t/2+_,y:e/2,transform:"\n          rotate(".concat(g+w," ").concat(j.join(" "),")\n          translate(0 ").concat(-6.5,")\n        ")}}else{var k=this.state,S=Ut(z(.5,U(k.startPoint,k.endPoint)),2);s=S[0],f=S[1];var C=this.getLengthAngle(),P=C.length;c=180*C.angle/Math.PI,P-=19.528;var A=this.props.bend||0,x=A*Math.PI/180;i=this.props.shift||0;var E=P/2,D=-P*Math.tan(x)/2,R=[P+19.528+13,Math.max(Math.abs(D)+13,13)];n=-(t=R[0])/2,o=0;var M=[9.764,(e=R[1])/2],T=[9.764+P,e/2],I=U(M,[E,D]);u="\n        M ".concat(M.join(" "),"\n        Q ").concat(I.join(" "),"\n        ").concat(T.join(" "),"\n      "),l={x:0,y:e/2-6.5,transform:"rotate(".concat(-A," ").concat(9.764," ").concat(e/2,")")},a={x:P+9.764,y:e/2-6.5,transform:"rotate(".concat(A," ").concat(P+9.764," ").concat(e/2,")")}}return Object(r.h)("li",{"data-id":this.props.id,class:_t()("grid-arrow",{selected:this.props.selected,phantom:this.props.phantom}),style:{height:e,width:t,left:s+n,top:f-e/2+o,transform:"rotate(".concat(c,"deg) translateY(").concat(7*i,"px)")},onClick:this.props.onClick},Object(r.h)("svg",{ref:function(t){return p.svgElement=t},width:t,height:e},Object(r.h)("path",{class:"mouse",fill:"none","stroke-width":"12",stroke:"transparent","stroke-linecap":"square",d:u}),Object(r.h)("g",{ref:function(t){return p.pathElement=t},fill:"none",mask:"double"===this.props.line?"url(#hollowPath".concat(this.props.id,")"):null},Object(r.h)("path",{d:u,stroke:"none"===this.props.line?"transparent":"black","stroke-width":"double"===this.props.line?6:1,"stroke-dasharray":{dashed:"7, 3",dotted:"2, 4"}[this.props.line]}),"double"===this.props.line&&Object(r.h)("mask",{id:"hollowPath".concat(this.props.id),maskUnits:"userSpaceOnUse"},Object(r.h)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),Object(r.h)("path",{d:u,stroke:"black","stroke-width":"4","stroke-linecap":"square"}))),Object(r.h)("image",{x:l.x,y:l.y,width:9.764,height:13,transform:l.transform,xlinkHref:"./img/arrow/".concat(["double"===this.props.line?"double-":"",this.props.tail||"none"].join(""),".svg")}),Object(r.h)("image",{x:a.x,y:a.y,width:9.764,height:13,transform:a.transform,xlinkHref:"./img/arrow/".concat(["double"===this.props.line?"double-":"",this.props.head||"default"].join(""),".svg")})),Object(r.h)("div",{ref:function(t){return p.valueElement=t},class:_t()("value",this.props.labelPosition),style:{left:this.state.labelX,top:this.state.labelY,transform:"rotate(".concat(-c,"deg)")}},this.props.value?"\\(".concat(this.props.value,"\\)"):Object(r.h)("span",{class:"hide"},"_")))}}])&&Ft(e.prototype,n),o&&Ft(e,o),l}(r.Component);function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(n),!0).forEach((function(e){Jt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var l,a=t[Symbol.iterator]();!(r=(l=a.next()).done)&&(n.push(l.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||Zt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qt(t){return function(t){if(Array.isArray(t))return Qt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Zt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(t,e){if(t){if("string"==typeof t)return Qt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qt(t,e):void 0}}function Qt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ee(t,e){return(ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ne(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=oe(t);if(e){var o=oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return re(this,n)}}function re(t,e){return!e||"object"!==Wt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function oe(t){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ie=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ee(t,e)}(l,t);var e,n,o,i=ne(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=i.call(this,t)).handleNodeMouseDown=function(t){if(0===t.button){var n=e.props.cameraPosition,r=e.coordsToPosition([t.clientX,t.clientY]),o=e.props.data.nodes.findIndex((function(t){return L(t.position,r)})),i=e.props.data.nodes[o];e.mouseDown={evt:t,cameraPosition:n,position:r,nodeIndex:o,node:i,mode:e.props.mode}}},e.handleCellGrabberMouseDown=function(t){if(0===t.button){t.stopPropagation();var n=t.position,r=e.props.data.nodes.findIndex((function(t){return L(t.position,n)})),o=e.props.data.nodes[r];e.mouseDown={evt:t,position:n,nodeIndex:r,node:o,mode:"move"}}},e.handleCellAddLoopClick=function(t){if(0===t.button){t.stopPropagation();var n=qt(e.props.data.nodes),r=e.coordsToPosition([t.clientX,t.clientY]),o=n.find((function(t){return L(t.position,r)}));null==o&&n.push(o={id:B(),position:r,value:""});var i=[].concat(qt(e.props.data.edges),[{from:o.id,to:o.id,loop:[0,!1],labelPosition:"right"}]),l=e.props.onDataChange;(void 0===l?function(){}:l)({data:{nodes:n,edges:i}})}},e.handleNodeMouseUp=function(t){if(null!=e.mouseDown){var n=e.mouseDown.evt;if(t.clientX===n.clientX&&t.clientY===n.clientY){var r=e.mouseDown.position,o=e.props.onCellClick;(void 0===o?function(){}:o)({position:r})}}},e.handleCellChange=function(t){var n=e.props.onDataChange,r=void 0===n?function(){}:n,o=qt(e.props.data.nodes),i=o.findIndex((function(e){return L(e.position,t.position)}));if(i<0)""!==t.value.trim()&&o.push({id:B(),position:t.position,value:t.value});else{var l=o[i].id;if(o[i]={id:l,position:qt(t.position),value:t.value},""===t.value.trim())e.props.data.edges.find((function(t){return t.from===l||t.to===l}))||(o[i]=null)}r({data:{nodes:o.filter((function(t){return null!=t})),edges:e.props.data.edges}})},e.handleTypesetFinish=function(t){if(null!=t.element){var n=t.element.getBoundingClientRect();e.setState((function(e){return{cellTypesetSizes:Object.assign(e.cellTypesetSizes,Jt({},t.position.join(","),[n.width,n.height]))}}))}else delete e.state.cellTypesetSizes[t.position.join(",")]},e.handleEdgeClick=function(t){return null==e.edgeClickHandlersCache&&(e.edgeClickHandlersCache={}),null==e.edgeClickHandlersCache[t]&&(e.edgeClickHandlersCache[t]=function(n){var r=e.props.onArrowClick,o=void 0===r?function(){}:r;n.edge=t,o(n)}),e.edgeClickHandlersCache[t]},e.state={width:0,height:0,phantomArrow:null,cellTypesetSizes:{}},e}return e=l,(n=[{key:"componentDidMount",value:function(){var t=this;this.updateSize(),window.addEventListener("resize",(function(){return t.updateSize()})),document.addEventListener("mouseup",(function(){t.mouseDown=null;var e=t.state.phantomArrow;if(null!=e){if(!L(e.from,e.to)){var n=qt(t.props.data.nodes),r=Xt([e.from,e.to].map((function(t){return n.find((function(e){return L(e.position,t)}))})),2),o=r[0],i=r[1];null==o&&n.push(o={id:B(),position:e.from,value:""}),null==i&&n.push(i={id:B(),position:e.to,value:""});var l=[].concat(qt(t.props.data.edges),[{from:o.id,to:i.id}]),a=t.props.onDataChange;(void 0===a?function(){}:a)({data:{nodes:n,edges:l}})}t.setState({phantomArrow:null})}})),document.addEventListener("mousemove",(function(e){if(null!=t.mouseDown){e.preventDefault();var n=t.coordsToPosition([e.clientX,e.clientY]);if("pan"===t.mouseDown.mode){var r=t.mouseDown.evt,o=[r.clientX,r.clientY],i=F([e.clientX,e.clientY],o),l=t.props.onPan;(void 0===l?function(){}:l)({cameraPosition:F(t.mouseDown.cameraPosition,i)})}else if("move"===t.mouseDown.mode){var a=t.mouseDown.nodeIndex;if(a<0)return;if(null!=t.props.data.nodes.find((function(t){return L(t.position,n)})))return;var u=t.props.onDataChange;(void 0===u?function(){}:u)({selectedCell:n,data:{nodes:t.props.data.nodes.map((function(t,e){return e!==a?t:Yt(Yt({},t),{},{position:n})})),edges:t.props.data.edges}})}else if("arrow"===t.mouseDown.mode){var c=t.mouseDown.position,s=n;if(null!=t.state.phantomArrow&&L(c,t.state.phantomArrow.from)&&L(s,t.state.phantomArrow.to))return;t.setState({phantomArrow:L(c,s)?null:{from:c,to:s}})}}}))}},{key:"componentDidUpdate",value:function(t){var e=this;if(null==this.props.selectedCell||null!=t.selectedCell&&L(t.selectedCell,this.props.selectedCell)){if(null!=this.props.selectedArrow&&(null==t.selectedArrow||t.selectedArrow!==this.props.selectedArrow)){var n=this.props.data.edges[this.props.selectedArrow],r=[n.from,n.to].map((function(t){return e.props.data.nodes.find((function(e){return e.id===t})).position})).reduce((function(t,e){return U(t,e)}),[0,0]).map((function(t){return Math.round(t/2)}));this.panCellIntoView(r)}}else this.panCellIntoView(this.props.selectedCell)}},{key:"updateSize",value:function(){var t=this.element.getBoundingClientRect(),e=t.width,n=t.height;this.setState({width:e,height:n})}},{key:"getViewportRect",value:function(){return{width:this.state.width,height:this.state.height,left:this.props.cameraPosition[0],top:this.props.cameraPosition[1]}}},{key:"coordsToPosition",value:function(t){var e=this;return t.map((function(t,n){return Math.floor((t+e.props.cameraPosition[n])/e.props.cellSize)}))}},{key:"positionToRect",value:function(t){var e=Xt(t,2),n=e[0],r=e[1];return{width:this.props.cellSize,height:this.props.cellSize,left:n*this.props.cellSize,top:r*this.props.cellSize}}},{key:"panCellIntoView",value:function(t){var e=this.props.onPan,n=void 0===e?function(){}:e,r=this.positionToRect(t),o=this.getViewportRect(),i=Xt(this.props.cameraPosition,2),l=i[0],a=i[1];r.left<o.left?l=r.left:r.left+r.width>o.left+o.width&&(l=r.left+r.width-o.width),r.top<o.top?a=r.top:r.top+r.height>o.top+o.height&&(a=r.top+r.height-o.height),n({cameraPosition:[l,a]})}},{key:"render",value:function(){var t=this;if(null==this.state.width)return Object(r.h)("section",{ref:function(e){return t.element=e},id:"grid"});var e=this.props,n=e.cellSize,o=e.cameraPosition,i=this.state.cellTypesetSizes,l=[this.state.width,this.state.height],a=Xt(o.map((function(t){return Math.floor(t/n)})),2),u=a[0],c=a[1],s=Xt(o.map((function(t,e){return Math.floor((t+l[e])/n)})),2),f=s[0],p=s[1],d=f-u+1,h=p-c+1,y=Xt(F(z(n,[u,c]),o),2),b=y[0],m=y[1];return Object(r.h)("section",{ref:function(e){return t.element=e},id:"grid",class:this.props.mode},Object(r.h)("ol",{style:{gridTemplateColumns:"repeat(".concat(d,", ").concat(n,"px)"),gridTemplateRows:"repeat(".concat(h,", ").concat(n,"px)"),left:b,top:m,width:d*n,height:h*n},onMouseDown:this.handleNodeMouseDown,onMouseUp:this.handleNodeMouseUp},Array(h).fill().map((function(e,o){return Array(d).fill().map((function(t,e){return[e+u,o+c]})).map((function(e){var o=null!=t.props.selectedCell&&L(e,t.props.selectedCell),i=t.props.data.nodes.find((function(t){return L(t.position,e)}));return Object(r.h)(xt,{key:e.join(","),position:e,size:n,selected:o,edit:o&&t.props.cellEditMode,value:t.props.mathjaxLoaded&&i&&i.value,onGrabberMouseDown:t.handleCellGrabberMouseDown,onAddLoopClick:t.handleCellAddLoopClick,onSubmit:t.props.onCellSubmit,onChange:t.handleCellChange,onTypesetFinish:t.handleTypesetFinish})}))}))),Object(r.h)("ul",{style:{left:-o[0],top:-o[1]}},this.props.data.edges.map((function(e,o){var l=t.props.data.nodes,a=l.find((function(t){return t.id===e.from})).position,u=l.find((function(t){return t.id===e.to})).position;return Object(r.h)(Kt,{cellSize:n,id:o.toString(),from:a,to:u,fromSize:i[a.join(",")],toSize:i[u.join(",")],selected:t.props.selectedArrow===o,bend:e.bend,shift:e.shift,loop:e.loop,tail:e.tail,line:e.line,head:e.head,value:t.props.mathjaxLoaded&&e.value,labelPosition:e.labelPosition,onClick:t.handleEdgeClick(o),mathjaxLoaded:t.props.mathjaxLoaded})})),this.state.phantomArrow&&Object(r.h)(Kt,{cellSize:n,phantom:!0,from:this.state.phantomArrow.from,to:this.state.phantomArrow.to,fromSize:i[this.state.phantomArrow.from.join(",")],toSize:i[this.state.phantomArrow.to.join(",")]})))}}])&&te(e.prototype,n),o&&te(e,o),l}(r.Component);function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ce(t,e,n){return e&&ue(t.prototype,e),n&&ue(t,n),t}function se(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fe(t,e)}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=he(t);if(e){var o=he(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return de(this,n)}}function de(t,e){return!e||"object"!==le(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function he(t){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ye=function(t){se(n,t);var e=pe(n);function n(){var t;ae(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).handleClick=function(e){e.preventDefault();var n=t.props.onClick;(void 0===n?function(){}:n)(e)},t}return ce(n,[{key:"render",value:function(){var t=this.props,e=t.checked,n=t.disabled,o=t.icon,i=t.name;return Object(r.h)("li",{class:_t()("button",this.props.class,{checked:e,disabled:n}),title:i},Object(r.h)("a",{href:"#",onClick:this.handleClick},Object(r.h)("img",{style:{backgroundImage:"url('".concat(o,"')")},src:"./img/tools/blank.svg",alt:i})))}}]),n}(r.Component),be=function(){return Object(r.h)("li",{class:"separator"},"Separator")},me=function(t){se(n,t);var e=pe(n);function n(){return ae(this,n),e.apply(this,arguments)}return ce(n,[{key:"render",value:function(){return Object(r.h)("section",{class:_t()("toolbox",this.props.class),id:this.props.id},Object(r.h)("ul",null,this.props.children))}}]),n}(r.Component);function ve(t){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ge(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var l,a=t[Symbol.iterator]();!(r=(l=a.next()).done)&&(n.push(l.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return we(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Oe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_e(Object(n),!0).forEach((function(e){je(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function je(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Se(t,e){return(Se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ae(t);if(e){var o=Ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pe(this,n)}}function Pe(t,e){return!e||"object"!==ve(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ae(t){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Se(t,e)}(l,t);var e,n,o,i=Ce(l);function l(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this)).handleButtonClick=function(e){return null==t.buttonClickHandlersCache&&(t.buttonClickHandlersCache={}),null==t.buttonClickHandlersCache[e]&&(t.buttonClickHandlersCache[e]=function(n){var r,o,i,l=t.props,a=l.data,u=l.onChange,c=void 0===u?function(){}:u,s={};if(["tail","mapsto","twoheads"].includes(e)){var f="twoheads"===e?"head":"tail";s=je({},f,a[f]===e?"none":e)}else if("head"===e)s={head:null==a.head?"none":null};else if(["double","solid","dashed","dotted"].includes(e))"double"===(s={line:(a.line||"solid")===e?"none":e}).line?s=Oe(Oe(Oe({},s),[null,"none"].includes(a.head)?{}:{head:null}),[null,"mapsto","none"].includes(a.tail)?{}:{tail:"none"}):"none"===s.line&&(s=Oe(Oe({},s),{},{head:"none",tail:"none",labelPosition:"inside"}));else if(["labelleft","labelright","labelinside"].includes(e))s={labelPosition:"none"===a.line?"inside":e.slice(5)};else if(["hook","harpoon"].includes(e)){var p="hook"===e?"tail":"head",d=[e,"".concat(e,"alt"),"none"],h=(d.indexOf(a[p])+1)%d.length;s=je({},p,d[h])}else if(["bendleft","bendright"].includes(e)){if(null!=a.loop)return;var y=a.bend,b=void 0===y?0:y,m=0===b||("bendleft"===e?b>0:b<0),v=0!==b?Math.sign(b):"bendleft"===e?1:-1,g=[0,30,49,60,67,71,74,76,78,79,80],w=g.reduce((function(t,e,n){return e<=Math.abs(b)?n:t}),-1);w<g.length-1&&b>=(g[w+1]+g[w])/2&&w++;var _=v*g[Math.min(w+(2*+m-1),g.length-1)];s={bend:(r=-80,o=80,i=_,Math.max(r,Math.min(o,i)))}}else if(["shiftleft","shiftright"].includes(e)){if(null!=a.loop)return;var O=a.shift;s={shift:(void 0===O?0:O)+("shiftright"===e?1:-1)}}else if(["reversearrow"].includes(e)){var j=a.from,k=a.to,S=a.labelPosition;if(s={to:j,from:k},null!=S){var C=S;"left"===S?C="right":"right"===S&&(C="left"),s.labelPosition=C}if(null!=a.bend&&(s.bend=-a.bend),null!=a.shift&&(s.shift=-a.shift),null!=a.loop){var P=ge(a.loop,2),A=P[0],x=P[1];s.loop=[A,!x]}}else if(["rotate"].includes(e)){if(null==a.loop)return;var E=ge(a.loop,2),D=E[0],R=E[1];s.loop=[(D+90)%360,R]}c({data:Oe(Oe({},a),s)})}),t.buttonClickHandlersCache[e]},t.handleEditButtonClick=function(){t.updateEditPosition(),t.setState({edit:!0})},t.handleFormSubmit=function(e){e.preventDefault(),t.setState({edit:!1})},t.handleInputBlur=function(){t.setState({edit:!1})},t.handleInputChange=function(e){var n=e.currentTarget.value,r=t.props.onChange;(void 0===r?function(){}:r)({data:Oe(Oe({},t.props.data),{},{value:n})})},t.handleInputKeyDown=function(t){t.stopPropagation()},t.handleInputKeyUp=function(e){"Escape"===e.key&&(e.stopPropagation(),t.setState({edit:!1}))},t.state={edit:!1,editTop:0,editLeft:0},t}return e=l,(n=[{key:"componentDidMount",value:function(){var t=this;document.addEventListener("keydown",(function(e){if(!e.ctrlKey&&!e.metaKey&&t.props.show&&!t.state.edit){var n={ArrowUp:e.shiftKey?"bendleft":"shiftleft",ArrowDown:e.shiftKey?"bendright":"shiftright",r:"reversearrow",a:"labelleft",s:"labelinside",d:"labelright",e:"rotate"};if(null!=n[e.key])e.preventDefault(),t.handleButtonClick(n[e.key])();else if(["Delete","Backspace"].includes(e.key)){e.preventDefault();var r=t.props.onRemoveClick;(void 0===r?function(){}:r)(e)}else"Enter"==e.key&&(e.preventDefault(),t.handleEditButtonClick())}}))}},{key:"shouldComponentUpdate",value:function(t,e){return t.show!==this.props.show||t.data!==this.props.data||e.edit!==this.state.edit||e.editTop!==this.state.editTop||e.editLeft!==this.state.editLeft}},{key:"componentDidUpdate",value:function(t,e){!e.edit&&this.state.edit?this.inputElement.select():e.edit&&!this.state.edit&&this.inputElement.blur()}},{key:"updateEditPosition",value:function(){var t=document.querySelector('.grid-arrow[data-id="'.concat(this.props.edgeId,'"] .value')).getBoundingClientRect(),e=t.left,n=t.top,r=t.width,o=window.getComputedStyle(this.editElement),i=o.width,l=o.height;this.setState({editLeft:e+r/2-parseFloat(i)/2,editTop:n-parseFloat(l)-10})}},{key:"render",value:function(){var t=this,e=null==this.props.data?{}:this.props.data;return Object(r.h)("section",{id:"properties",class:_t()({show:this.props.show,edit:this.state.edit})},Object(r.h)(me,null,Object(r.h)(ye,{checked:!1,icon:"./img/properties/reverse.svg",name:"Reverse Arrow (R)",onClick:this.handleButtonClick("reversearrow")}),Object(r.h)(be,null),Object(r.h)(ye,{checked:"tail"===e.tail,disabled:["none","double"].includes(e.line),icon:"./img/properties/tail.svg",name:"Tail",onClick:this.handleButtonClick("tail")}),Object(r.h)(ye,{checked:"mapsto"===e.tail,disabled:["none"].includes(e.line),icon:"./img/properties/mapsto.svg",name:"Maps To",onClick:this.handleButtonClick("mapsto")}),Object(r.h)(ye,{checked:["hook","hookalt"].includes(e.tail),disabled:["none","double"].includes(e.line),icon:"./img/properties/".concat("hookalt"===e.tail?"hookalt":"hook",".svg"),name:"Hook",onClick:this.handleButtonClick("hook")}),Object(r.h)(be,null),Object(r.h)(ye,{checked:"dotted"===e.line,icon:"./img/properties/dotted.svg",name:"Dotted",onClick:this.handleButtonClick("dotted")}),Object(r.h)(ye,{checked:"dashed"===e.line,icon:"./img/properties/dashed.svg",name:"Dashed",onClick:this.handleButtonClick("dashed")}),Object(r.h)(ye,{checked:!e.line||"solid"===e.line,icon:"./img/properties/solid.svg",name:"Solid",onClick:this.handleButtonClick("solid")}),Object(r.h)(ye,{checked:"double"===e.line,icon:"./img/properties/double.svg",name:"Double",onClick:this.handleButtonClick("double")}),Object(r.h)(be,null),null==e.loop?Object(r.h)(r.Fragment,null,Object(r.h)(ye,{key:"shiftright",icon:"./img/properties/shiftright.svg",name:"Shift Right (Down Arrow)",onClick:this.handleButtonClick("shiftright")}),Object(r.h)(ye,{key:"shiftleft",icon:"./img/properties/shiftleft.svg",name:"Shift Left (Up Arrow)",onClick:this.handleButtonClick("shiftleft")}),Object(r.h)(ye,{key:"bendright",icon:"./img/properties/bendright.svg",name:"Bend Right (Shift+Down Arrow)",onClick:this.handleButtonClick("bendright")}),Object(r.h)(ye,{key:"bendleft",icon:"./img/properties/bendleft.svg",name:"Bend Left (Shift+Up Arrow)",onClick:this.handleButtonClick("bendleft")})):Object(r.h)(r.Fragment,null,Object(r.h)(ye,{key:"rotate",icon:"./img/properties/rotate.svg",name:"Rotate (E)",onClick:this.handleButtonClick("rotate")})),Object(r.h)(be,null),Object(r.h)(ye,{checked:["harpoon","harpoonalt"].includes(e.head),disabled:["none","double"].includes(e.line),icon:"./img/properties/".concat("harpoonalt"===e.head?"harpoonalt":"harpoon",".svg"),name:"Harpoon",onClick:this.handleButtonClick("harpoon")}),Object(r.h)(ye,{checked:null==e.head,disabled:["none"].includes(e.line),icon:"./img/properties/head.svg",name:"Default Head",onClick:this.handleButtonClick("head")}),Object(r.h)(ye,{checked:"twoheads"==e.head,disabled:["none","double"].includes(e.line),icon:"./img/properties/twoheads.svg",name:"Two Heads",onClick:this.handleButtonClick("twoheads")}),Object(r.h)(be,null),Object(r.h)(ye,{checked:!e.labelPosition||"left"===e.labelPosition,disabled:["none"].includes(e.line),icon:"./img/properties/labelleft.svg",name:"Left Label (A)",onClick:this.handleButtonClick("labelleft")}),Object(r.h)(ye,{checked:"inside"===e.labelPosition,icon:"./img/properties/labelinside.svg",name:"Inside Label (S)",onClick:this.handleButtonClick("labelinside")}),Object(r.h)(ye,{checked:"right"===e.labelPosition,disabled:["none"].includes(e.line),icon:"./img/properties/labelright.svg",name:"Right Label (D)",onClick:this.handleButtonClick("labelright")}),Object(r.h)(ye,{checked:this.state.edit,icon:"./img/properties/edit.svg",name:"Edit Label (Enter)",onClick:this.handleEditButtonClick}),Object(r.h)(be,null),Object(r.h)(ye,{class:"remove",icon:"./img/properties/trash.svg",name:"Remove Arrow (Del)",onClick:this.props.onRemoveClick})),Object(r.h)("form",{ref:function(e){return t.editElement=e},class:"edit",style:{left:this.state.editLeft,top:this.state.editTop},onSubmit:this.handleFormSubmit},Object(r.h)("input",{ref:function(e){return t.inputElement=e},type:"text",value:e.value||"",onBlur:this.handleInputBlur,onInput:this.handleInputChange,onKeyDown:this.handleInputKeyDown,onKeyUp:this.handleInputKeyUp})))}}])&&ke(e.prototype,n),o&&ke(e,o),l}(r.Component);function Ee(t){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function De(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Re(t,e){return(Re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Me(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ie(t);if(e){var o=Ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Te(this,n)}}function Te(t,e){return!e||"object"!==Ee(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ie(t){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Re(t,e)}(a,t);var e,n,o,l=Me(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=l.call(this,t)).handleOverlayMouseDown=function(t){if(t.target===t.currentTarget){var n=e.props.onClose;(void 0===n?function(){}:n)(t)}},e.handleCopyClick=function(){i()(e.props.code),e.textareaElement.focus(),e.textareaElement.select()},e}return e=a,(n=[{key:"componentDidUpdate",value:function(t){!t.show&&this.props.show&&(this.textareaElement.focus(),this.textareaElement.select())}},{key:"render",value:function(){var t=this,e=this.props,n=e.show,o=e.code;return Object(r.h)("section",{id:"modal-overlay",class:_t()({show:n}),onMouseDown:this.handleOverlayMouseDown},Object(r.h)("section",{class:"modal-box code-box"},Object(r.h)("textarea",{ref:function(e){return t.textareaElement=e},value:o,onInput:this.props.onCodeInput}),Object(r.h)("ul",{class:"buttons"},Object(r.h)("li",null,Object(r.h)("button",{onClick:this.handleCopyClick},"Copy")),Object(r.h)("li",{class:"separator"}),Object(r.h)("li",null,Object(r.h)("button",{onClick:this.props.onParseButtonClick},"Parse")),Object(r.h)("li",null,Object(r.h)("button",{onClick:this.props.onClose},"Close")))))}}])&&De(e.prototype,n),o&&De(e,o),a}(r.Component);function Le(t){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ue(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var l,a=t[Symbol.iterator]();!(r=(l=a.next()).done)&&(n.push(l.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||Fe(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(t){return function(t){if(Array.isArray(t))return He(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Fe(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(t,e){if(t){if("string"==typeof t)return He(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(t,e):void 0}}function He(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ne(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ve(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ne(Object(n),!0).forEach((function(e){$e(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function We(t,e){return(We=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ge(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Xe(t);if(e){var o=Xe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ye(this,n)}}function Ye(t,e){return!e||"object"!==Le(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xe(t){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Je=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&We(t,e)}(a,t);var e,n,o,l=Ge(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=l.call(this,t)).parseDiagramFromUrl=function(){if(window.location.hash.length>0){try{return t=window.location.hash.slice(1),mt(Object(T.decompressFromEncodedURIComponent)(t))}catch(t){}try{return vt(window.location.hash.slice(1))}catch(t){alert("Invalid diagram permalink.")}}var t;return{nodes:[],edges:[]}},e.resetCamera=function(){e.setState({cameraPosition:Array(2).fill(-Math.floor(e.state.cellSize/2)),selectedCell:[0,0],selectedArrow:null})},e.handlePan=function(t){var n=t.cameraPosition;e.setState({cameraPosition:n})},e.generateLink=function(){var t,n=(t=e.state.diagram,Object(T.compressToEncodedURIComponent)(bt(t)));return window.location.href.split("#")[0]+"#"+n},e.copyLink=function(){if(!e.state.confirmLinkCopy){var t=e.generateLink();window.history.pushState(null,null,t),i()(t)?(e.setState({confirmLinkCopy:!0}),setTimeout((function(){return e.setState({confirmLinkCopy:!1})}),1e3)):prompt("Copy link down below:",t)}},e.openCodeBox=function(){var t="% ".concat(e.generateLink(),"\n").concat(gt(e.state.diagram));e.setState({codeValue:t,showCodeBox:!0,selectedArrow:null})},e.handleCloseCodeBox=function(){e.setState({showCodeBox:!1})},e.handleCodeInput=function(t){e.setState({codeValue:t.currentTarget.value})},e.handleParseCode=function(){var t,n=gt(e.state.diagram),r=e.state.codeValue,o=e.state.diagram;if(n!==r)try{t=ut(r),o=mt(JSON.stringify(t)),e.resetCamera(),e.setState({showCodeBox:!1}),e.handleDataChange({data:o})}catch(t){alert("Could not parse code.\n\nReason: ".concat(t.message))}},e.moveInHistory=function(t){null!=e.history[e.historyPointer+t]&&(e.historyPointer+=t,e.setState({diagram:e.history[e.historyPointer].diagram,selectedArrow:null}))},e.undo=function(){return e.moveInHistory(-1)},e.redo=function(){return e.moveInHistory(1)},e.handleDataChange=function(t){var n=e.state.diagram.edges.length+1===t.data.edges.length,r={diagram:t.data,time:Date.now()};(e.historyPointer<e.history.length-1||Date.now()-e.history[e.historyPointer].time>500)&&e.history[e.historyPointer].diagram!==t.data?(e.history.splice(e.historyPointer+1,e.history.length,r),e.historyPointer=e.history.length-1):e.history[e.historyPointer]=r,e.setState((function(e){return Ve({diagram:t.data,selectedArrow:n?t.data.edges.length-1:e.selectedArrow},null!=t.selectedCell?{selectedCell:t.selectedCell,selectedArrow:null}:{})}))},e.handleCellClick=function(t){e.setState({selectedCell:t.position,selectedArrow:null,cellEditMode:!0})},e.handleCellSubmit=function(t){e.setState({cellEditMode:!1})},e.handleArrowClick=function(t){e.setState({selectedArrow:e.state.selectedArrow===t.edge?null:t.edge})},e.handleToolClick=function(t){return null==e.toolClickHandlersCache&&(e.toolClickHandlersCache={}),null==e.toolClickHandlersCache[t]&&(e.toolClickHandlersCache[t]=function(n){e.setState({tool:t,selectedArrow:null})}),e.toolClickHandlersCache[t]},e.handleAboutClick=function(){Object(r.render)(Object(r.h)("a",{ref:function(t){t&&(t.click(),t.remove())},href:"https://github.com/yishn/tikzcd-editor",target:"_blank"}),document.createElement("div"))},e.handleEdgeChange=function(t){var n=ze(e.state.diagram.edges);n[e.state.selectedArrow]=Ve(Ve({},n[e.state.selectedArrow]),t.data),null!=t.data.value&&""===t.data.value.trim()&&delete n[e.state.selectedArrow].value,e.handleDataChange({data:{nodes:e.state.diagram.nodes,edges:n}})},e.handleEdgeRemoveClick=function(){var t=e.state.diagram.edges.filter((function(t,n){return n!==e.state.selectedArrow})),n=e.state.diagram.nodes.filter((function(e){return""!==e.value.trim()||t.some((function(t){return t.from===e.id||t.to===e.id}))}));e.handleDataChange({data:{nodes:n,edges:t}}),e.setState({selectedArrow:null})},e.state={tool:"pan",cellSize:130,diagram:{nodes:[],edges:[]},cameraPosition:[-65,-65],selectedCell:[0,0],selectedArrow:null,cellEditMode:!1,confirmLinkCopy:!1,showCodeBox:!1},e.state.diagram=e.parseDiagramFromUrl(),e.history=[{diagram:e.state.diagram,time:Date.now()}],e.historyPointer=0,e}return e=a,(n=[{key:"componentDidMount",value:function(){var t=this,e={Shift:"arrow"," ":"pan"},n={ArrowLeft:[-1,0],ArrowRight:[1,0],ArrowUp:[0,-1],ArrowDown:[0,1]};document.addEventListener("keydown",(function(r){if(null!=e[r.key]){if(null!=t.prevTool)return;t.prevTool=t.state.tool,t.setState({tool:e[r.key]})}else if(Object.keys(n).includes(r.key))t.setState((function(t){return t.showCodeBox||t.cellEditMode||null!=t.selectedArrow?null:{selectedCell:U(t.selectedCell,n[r.key])}}));else if("Tab"===r.key&&null!=t.state.selectedArrow){r.preventDefault(),r.stopPropagation();var o=r.shiftKey?-1:1;t.setState((function(t){if(null!=t.selectedArrow){var e=t.diagram,n=e.nodes,r=e.edges,i=r.length,l=function(t){return n.find((function(e){return e.id===t})).position},a=ze(Array(i)).map((function(t,e){return[e,[r[e].from,r[e].to].map(l).reduce((function(t,e){return U(t,e)}),[0,0])]})).sort((function(t,e){var n=Ue(t,2),r=(n[0],n[1]),o=Ue(e,2);return o[0],function t(e,n){return e.length!=n.length?e.length-n.length:0===e.length?0:e[0]<n[0]?-1:e[0]>n[0]?1:t(e.slice(1),n.slice(1))}(r,o[1])})).map((function(t){var e=Ue(t,2),n=e[0];return e[1],n})),u=a.indexOf(t.selectedArrow);return{selectedArrow:a[((u+o)%i+i)%i]}}}))}else"Enter"===r.key&&t.setState((function(t){return t.showCodeBox||t.cellEditMode||null!=t.selectedArrow?null:{cellEditMode:!0}}))})),document.addEventListener("keyup",(function(n){if(Object.keys(e).includes(n.key)){if(null==t.prevTool)return;t.setState({tool:t.prevTool}),t.prevTool=null}else"Escape"===n.key&&t.setState((function(t){return t.showCodeBox?{showCodeBox:!1}:null!=t.selectedArrow?{selectedArrow:null}:t.cellEditMode?{cellEditMode:!1}:null}))})),window.addEventListener("popstate",(function(e){t.handleDataChange({data:t.parseDiagramFromUrl()}),t.resetCamera()})),window.addEventListener("beforeunload",(function(e){if(t.state.diagram.nodes.length>0||t.state.diagram.edges.length>0){var n="Do you really want to leave?";return e.returnValue=n,n}}))}},{key:"render",value:function(){return Object(r.h)("div",{id:"root"},Object(r.h)(ie,{cellSize:this.state.cellSize,cameraPosition:this.state.cameraPosition,data:this.state.diagram,mode:this.state.tool,selectedCell:null==this.state.selectedArrow?this.state.selectedCell:null,selectedArrow:this.state.selectedArrow,cellEditMode:this.state.cellEditMode,onPan:this.handlePan,onDataChange:this.handleDataChange,onCellClick:this.handleCellClick,onCellSubmit:this.handleCellSubmit,onArrowClick:this.handleArrowClick,mathjaxLoaded:this.props.mathjaxLoaded}),Object(r.h)(xe,{edgeId:this.state.selectedArrow,show:null!=this.state.selectedArrow,data:this.state.diagram.edges[this.state.selectedArrow],onChange:this.handleEdgeChange,onRemoveClick:this.handleEdgeRemoveClick}),Object(r.h)(me,{id:"toolbox"},Object(r.h)(ye,{checked:"pan"===this.state.tool,icon:"./img/tools/pan.svg",name:"Pan Tool (Space)",onClick:this.handleToolClick("pan")}),Object(r.h)(ye,{checked:"arrow"===this.state.tool,icon:"./img/tools/arrow.svg",name:"Arrow Tool (Shift)",onClick:this.handleToolClick("arrow")}),Object(r.h)(be,null),Object(r.h)(ye,{disabled:null==this.history[this.historyPointer-1],icon:"./img/tools/undo.svg",name:"Undo",onClick:this.undo}),Object(r.h)(ye,{disabled:null==this.history[this.historyPointer+1],icon:"./img/tools/redo.svg",name:"Redo",onClick:this.redo}),Object(r.h)(be,null),Object(r.h)(ye,{checked:this.state.showCodeBox,icon:"./img/tools/code.svg",name:"Open Code",onClick:this.openCodeBox}),Object(r.h)(ye,{icon:"./img/tools/".concat(this.state.confirmLinkCopy?"tick":"link",".svg"),name:"Copy Diagram Permalink",onClick:this.copyLink}),Object(r.h)(be,null),Object(r.h)(ye,{icon:"./img/tools/about.svg",name:"GitHub Repository",onClick:this.handleAboutClick})),Object(r.h)(Be,{code:this.state.codeValue,show:this.state.showCodeBox,onCodeInput:this.handleCodeInput,onParseButtonClick:this.handleParseCode,onClose:this.handleCloseCodeBox}))}}])&&Ke(e.prototype,n),o&&Ke(e,o),a}(r.Component);Object(r.render)(Object(r.h)(Je,{mathjaxLoaded:!1}),document.body),window.MathJax={loader:{load:["[tex]/noerrors"]},startup:{typeset:!1,ready:function(){MathJax.startup.defaultReady(),Object(r.render)(Object(r.h)(Je,{mathjaxLoaded:!0}),document.body)}},tex:{packages:{"[+]":["noerrors"]},inlineMath:[["\\(","\\)"]]},chtml:{merrorFont:""},options:{enableMenu:!1}};var qe=document.createElement("script");qe.src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.1.2/es5/tex-chtml.js",qe.async=!0,document.head.appendChild(qe)}]);
//# sourceMappingURL=bundle.js.map